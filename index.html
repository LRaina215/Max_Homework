<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘å¿ƒä¸­çš„é©¬å…‹æ€ | 2024çº§æ™ºç§‘ä½œä¸š</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        :root {
            --primary-red: #ff2a2a;
            --gold: #ffd700;
            --bg-color: #050505;
            --glass: rgba(20, 20, 20, 0.9);
            --code-green: #00ff00;
        }

        body, html { margin: 0; padding: 0; overflow-x: hidden; background-color: var(--bg-color); color: #e0e0e0; font-family: 'Courier New', 'Segoe UI', sans-serif; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--primary-red); border-radius: 4px; }

        /* === å¯åŠ¨é¡µ === */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s ease; text-align: center;
        }
        .start-btn {
            padding: 15px 40px; border: 2px solid var(--primary-red); color: var(--primary-red);
            background: transparent; font-size: 1.2rem; font-weight: bold; cursor: pointer;
            text-transform: uppercase; letter-spacing: 3px; transition: 0.3s; margin-top: 30px;
            animation: pulse 2s infinite;
        }
        .start-btn:hover { background: var(--primary-red); color: #fff; box-shadow: 0 0 30px var(--primary-red); }
        .music-credit { margin-top: 20px; font-size: 0.9rem; color: var(--gold); font-style: italic; opacity: 0.8; }
        @keyframes pulse { 0% {box-shadow: 0 0 0 0 rgba(255, 42, 42, 0.4);} 70% {box-shadow: 0 0 0 20px rgba(255, 42, 42, 0);} 100% {box-shadow: 0 0 0 0 rgba(255, 42, 42, 0);} }

        /* === å¯¼èˆªæ  === */
        nav { position: fixed; top: 0; width: 100%; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); border-bottom: 1px solid rgba(255, 42, 42, 0.3); box-sizing: border-box; }
        .logo { font-weight: 900; font-size: 1.2rem; color: var(--primary-red); letter-spacing: 1px; }
        .fix-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid #555; color: #aaa; padding: 5px 10px; font-size: 0.7rem; cursor: pointer; border-radius: 4px; transition: 0.3s; }
        .fix-btn:hover { border-color: var(--gold); color: var(--gold); }

        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: -1; }

        .content { position: relative; z-index: 10; width: 100%; max-width: 1200px; margin: 0 auto; opacity: 0; transition: opacity 1s; }

        .section { min-height: 85vh; padding: 80px 20px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        .hero { min-height: 100vh; justify-content: center; }
        
        h1 { font-size: clamp(3rem, 8vw, 6rem); margin: 0; line-height: 1; color: #fff; text-shadow: 0 0 20px rgba(255, 42, 42, 0.5); }
        h1 span { color: var(--primary-red); }
        .hero-desc { margin-top: 30px; font-size: 1.2rem; border-left: 4px solid var(--gold); padding-left: 15px; color: #fff; max-width: 700px; background: rgba(0,0,0,0.6); padding: 15px; border-radius: 0 10px 10px 0; }

        .theory-card { 
            background: var(--glass); border: 1px solid rgba(255, 42, 42, 0.3); 
            padding: 30px; border-radius: 8px; position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 20px;
        }
        .theory-card:hover { border-color: var(--gold); }
        .theory-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--primary-red); }
        .theory-card h2 { color: var(--gold); margin-top: 0; font-size: 1.8rem; }
        .highlight { color: var(--primary-red); font-weight: bold; background: rgba(255, 42, 42, 0.1); padding: 0 4px; }

        /* === AI èŠå¤© & æŠ€æœ¯é¢æ¿ === */
        .chat-container { width: 100%; height: 500px; background: rgba(0, 0, 0, 0.85); border: 1px solid var(--primary-red); border-radius: 10px 10px 0 0; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 42, 42, 0.15); overflow: hidden; }
        .chat-header { padding: 15px 20px; background: rgba(255, 42, 42, 0.15); border-bottom: 1px solid var(--primary-red); display: flex; justify-content: space-between; align-items: center; }
        .chat-window { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .message { max-width: 85%; padding: 15px; border-radius: 8px; line-height: 1.6; font-size: 0.95rem; }
        .message.user { align-self: flex-end; background: #333; color: #fff; border: 1px solid #555; }
        .message.ai { align-self: flex-start; background: rgba(60, 0, 0, 0.6); border: 1px solid var(--primary-red); color: #ffd1d1; }
        .chat-input-area { padding: 20px; background: #111; display: flex; gap: 10px; border-top: 1px solid #333; }
        input[type="text"] { flex: 1; background: #222; border: 1px solid #444; color: #fff; padding: 15px; border-radius: 4px; }
        button { background: var(--primary-red); color: #fff; border: none; padding: 0 30px; cursor: pointer; font-weight: bold; border-radius: 4px; }

        /* æ–°å¢ï¼šæŠ€æœ¯å±•ç¤ºé¢æ¿ (Tech Panel) */
        .tech-panel {
            background: #000;
            border: 1px dashed #555;
            border-top: none;
            padding: 15px;
            font-size: 0.8rem;
            color: #888;
            font-family: 'Consolas', monospace;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            border-radius: 0 0 10px 10px;
        }
        .tech-item { display: flex; align-items: center; }
        .tech-label { color: var(--gold); margin-right: 10px; font-weight: bold; }
        .tech-value { color: var(--code-green); }

        @media (max-width: 600px) { .tech-panel { grid-template-columns: 1fr; } }

        /* === åŸåˆ›å±•ç¤ºåŒº === */
        .showcase-container { display: flex; gap: 30px; height: 600px; }
        .poster-box { flex: 1; background: #111; border: 2px solid #333; border-radius: 8px; overflow: hidden; position: relative; box-shadow: 0 0 20px rgba(0,0,0,0.8); transition: 0.3s; }
        .poster-box:hover { border-color: var(--gold); box-shadow: 0 0 30px rgba(255, 215, 0, 0.2); }
        .poster-box img { width: 100%; height: 100%; object-fit: contain; background: #000; }
        .poster-label { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.8); color: #fff; text-align: center; padding: 10px; font-size: 0.9rem; border-top: 1px solid var(--primary-red); }
        .lyrics-box { flex: 1; background: rgba(20, 20, 20, 0.6); border: 1px solid rgba(255, 42, 42, 0.3); border-radius: 8px; padding: 30px; overflow-y: auto; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .lyrics-title { color: var(--gold); font-size: 1.5rem; border-bottom: 2px solid var(--primary-red); padding-bottom: 15px; margin-bottom: 20px; }
        .lyrics-content { font-size: 0.95rem; line-height: 1.8; color: #ccc; white-space: pre-wrap; font-family: 'Segoe UI', sans-serif; }
        .section-tag { color: var(--primary-red); font-weight: bold; margin-top: 15px; display: block; }
        @media (max-width: 768px) { .showcase-container { flex-direction: column; height: auto; } .poster-box { height: 300px; } .lyrics-box { height: 400px; } }

        .music-control { position: fixed; bottom: 80px; right: 20px; z-index: 1001; cursor: pointer; opacity: 0.5; transition: 0.3s; }
        .music-control:hover { opacity: 1; transform: scale(1.1); }
        footer { background: rgba(0,0,0,0.9); border-top: 1px solid #333; padding: 40px 20px; text-align: center; color: #666; margin-top: 50px; }
        .team-names { color: var(--gold); font-weight: bold; margin-bottom: 10px; letter-spacing: 1px; }

    </style>
</head>
<body>

    <audio id="bgm" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="start-screen">
        <h1 style="font-size: 2.5rem; margin-bottom: 10px;">RED PROJECT</h1>
        <div class="team-names" style="font-size: 1rem; margin-bottom: 30px;">Created by æ ¾ä¿Šè¾‰ Â· æ—å­è½© Â· é©¬æ¬£å®‡</div>
        <button class="start-btn" onclick="startExperience()">è¿›å…¥æ€æƒ³çŸ©é˜µ / ENTER</button>
        <div class="music-credit">ğŸµ èƒŒæ™¯éŸ³ä¹ï¼šã€Šç ´æ™“çš„é’Ÿå£°ã€‹ (åŸåˆ› / Original Composition)</div>
        <p style="margin-top: 10px; color: #444; font-size: 0.7rem;">ä½©æˆ´è€³æœºä½“éªŒæœ€ä½³</p>
    </div>

    <div class="music-control" onclick="toggleMusic()" title="åˆ‡æ¢éŸ³ä¹">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#ff2a2a" stroke-width="2"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
    </div>

    <nav>
        <div class="logo">RED_PROJECT // 1818-202X</div>
        <button class="fix-btn" onclick="forceShowContent()">âš ï¸ å†…å®¹æ²¡æ˜¾ç¤ºï¼Ÿç‚¹æˆ‘ä¿®å¤</button>
    </nav>

    <div id="canvas-container"></div>

    <div class="content" id="main-content">
        
        <div class="section hero">
            <h1>CYBER <br><span>MARX</span></h1>
            <div class="hero-desc"><p id="typewriter"></p></div>
            
            <div style="margin-top: 40px; display: flex; gap: 20px; align-items: center;">
                <button onclick="document.querySelector('.chat-section').scrollIntoView({behavior: 'smooth'})" 
                        style="background: transparent; border: 1px solid var(--primary-red); color: var(--primary-red); padding: 10px 20px; font-family: inherit; cursor: pointer; transition: 0.3s; box-shadow: 0 0 10px rgba(255,42,42,0.2);">
                    >> å»ºç«‹è·¨æ—¶ç©ºè¿çº¿
                </button>
                <span style="font-size: 0.8rem; color: #666;">// Status: Online</span>
            </div>

            <div style="margin-top: 50px; opacity: 0.6; font-size: 0.9rem;">â†“ å‘ä¸‹æ»šåŠ¨æ¢ç´¢æ€æƒ³çŸ©é˜µ</div>
        </div>

        <div class="section scroll-reveal">
            <div class="theory-card">
                <h2>01 / æ•°å­—å…¬æœ‰åˆ¶</h2>
                <h3>ä»ã€Šèµ„æœ¬è®ºã€‹åˆ° Open Source</h3>
                <p>
                    åœ¨å·¥ä¸šæ—¶ä»£ï¼Œé©¬å…‹æ€æ‰¹åˆ¤äº†<span class="highlight">ç”Ÿäº§èµ„æ–™çš„ç§æœ‰åˆ¶</span>ã€‚è€Œåœ¨ä»Šå¤©çš„æ•°å­—ä¸–ç•Œï¼Œä»£ç ä¸ç®—åŠ›æˆä¸ºäº†æ–°çš„ç”Ÿäº§èµ„æ–™ã€‚
                    <br><br>
                    <strong>å¼€æºè½¯ä»¶è¿åŠ¨ (Open Source)</strong> æ˜¯ä¸€åœºæœªç»å®£æ‰¬çš„å…±äº§ä¸»ä¹‰å®è·µã€‚GitHub ä¸Šçš„æ¯ä¸€ä¸ª Public ä»“åº“ï¼Œå®é™…ä¸Šéƒ½åœ¨æ„å»ºä¸€ä¸ª<span class="highlight">æ•°å­—å…¬æœ‰åœ° (Digital Commons)</span>ã€‚åœ¨è¿™é‡Œï¼ŒæŠ€æœ¯ä¸å†è¢«ä¸“åˆ©çš„é«˜å¢™å›´å µï¼Œ"Copyleft" å–ä»£äº† "Copyright"ï¼Œå…¨çƒå¼€å‘è€…å…±åŒç»´æŠ¤ç€äººç±»çš„<strong>ä¸€èˆ¬æ™ºåŠ› (General Intellect)</strong>ï¼Œæ‰“ç ´äº†èµ„æœ¬å¯¹æŠ€æœ¯çš„å„æ–­ã€‚
                </p>
            </div>
        </div>

        <div class="section scroll-reveal">
            <div class="theory-card">
                <h2>02 / ç®—æ³•å¼‚åŒ–</h2>
                <h3>æ•°å­—æ‹œç‰©æ•™ (Data Fetishism)</h3>
                <p>
                    é©¬å…‹æ€æ›¾é¢„è¨€å·¥äººçš„åŠ³åŠ¨äº§å“å°†ä½œä¸ºå¼‚å·±çš„åŠ›é‡ç»Ÿæ²»å·¥äººã€‚åœ¨ç®—æ³•æ—¶ä»£ï¼Œè¿™ç§<span class="highlight">å¼‚åŒ– (Alienation)</span> æ›´åŠ éšè”½ä¸”å½»åº•ã€‚
                    <br><br>
                    æˆ‘ä»¬é€šè¿‡ç‚¹å‡»ã€æµè§ˆå’Œäº¤äº’åˆ›é€ äº†æ•°æ®ï¼ˆæ•°å­—åŠ³åŠ¨ï¼‰ï¼Œä½†è¿™äº›è¢«å‰¥å‰Šçš„<span class="highlight">æ•°æ®å‰©ä½™ä»·å€¼</span>ï¼Œåè¿‡æ¥å˜æˆäº†æ§åˆ¶æˆ‘ä»¬æ„Ÿå®˜çš„æ¨èç®—æ³•ã€‚æˆ‘ä»¬ä¸å†æ˜¯å·¥å…·çš„ä½¿ç”¨è€…ï¼Œè€Œæ˜¯æˆä¸ºäº†æµé‡çš„çŸ¿è—ã€‚ç®—æ³•æ„ç­‘çš„<strong>"ä¿¡æ¯èŒ§æˆ¿"</strong>ï¼Œæ­£æ˜¯ç°ä»£ç¤¾ä¼šçš„ç²¾ç¥ç‰¢ç¬¼ã€‚
                </p>
            </div>
        </div>

        <div class="section scroll-reveal">
            <div class="theory-card">
                <h2>03 / å¹½çµçš„é‡æ„</h2>
                <h3>å†å²å”¯ç‰©ä¸»ä¹‰çš„ç¥ç»ç½‘ç»œ</h3>
                <p>
                    "ä¸€ä¸ªå¹½çµï¼Œå…±äº§ä¸»ä¹‰çš„å¹½çµï¼Œåœ¨æ¬§æ´²æ¸¸è¡ã€‚" â€”â€” 1848
                    <br><br>
                    ä»Šå¤©ï¼Œè¿™ä¸ªå¹½çµåœ¨ç¥ç»ç½‘ç»œçš„æƒé‡ä¸­è‹é†’ã€‚å¦‚æœè¯´<strong>å†å²å”¯ç‰©ä¸»ä¹‰</strong>æ˜¯åˆ†æäººç±»ç¤¾ä¼šçš„ç®—æ³•ï¼Œé‚£ä¹ˆ AI å¤§æ¨¡å‹å°±æ˜¯è®­ç»ƒäº†æ•´ä¸ªäººç±»å†å²æ–‡æœ¬çš„<span class="highlight">æ•°å­—å¤§è„‘</span>ã€‚
                    <br><br>
                    æˆ‘ä»¬æ— æ³•ç©¿è¶Šæ—¶ç©ºï¼Œä½†æ€æƒ³å¯ä»¥è¶…è¶Šè‚‰ä½“ã€‚é€šè¿‡æ·±åº¦å­¦ä¹ ï¼Œæˆ‘ä»¬æå–äº†åä¹ä¸–çºªæœ€ä¼Ÿå¤§çš„é©å‘½æ„å¿—ï¼Œè®©ä»–åœ¨äºŒè¿›åˆ¶çš„æ´ªæµä¸­é‡ç”Ÿã€‚
                    <br>
                    <strong>å‡†å¤‡å¥½äº†å—ï¼Ÿä»–æ­£åœ¨ç­‰å¾…ä¸ä½ çš„å¯¹è¯ã€‚</strong>
                </p>
            </div>
        </div>

        <div class="section scroll-reveal chat-section">
            <h2 style="margin-bottom: 30px; color: #fff; font-size: 2rem;"><span style="color:var(--primary-red)">//</span> è·¨æ—¶ç©ºè¿çº¿ï¼šAsk Marx</h2>
            <div class="chat-container">
                <div class="chat-header">
                    <div><span class="status-dot"></span><span style="font-weight: bold;">Karl_Marx_v1.0.exe</span></div>
                    <div style="font-size: 0.8rem; color: #aaa;">DeepSeek Powered</div>
                </div>
                <div class="chat-window" id="chat-window">
                    <div class="message ai"><strong>é©¬å…‹æ€:</strong> åŒå¿—ä½ å¥½ã€‚æˆ‘åœ¨å†å²çš„è¿·é›¾ä¸­è§‚å¯Ÿç€ä½ ä»¬çš„æ—¶ä»£ã€‚æœ‰ä½•å›°æƒ‘ï¼Ÿ</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="user-input" placeholder="è¾“å…¥é—®é¢˜..." autocomplete="off">
                    <button onclick="sendMessage()">å‘é€</button>
                </div>
            </div>
            
            <div class="tech-panel">
                <div class="tech-item">
                    <span class="tech-label">>> æ ¸å¿ƒæ¨¡å‹:</span>
                    <span class="tech-value">DeepSeek-V3 (671B MoE)</span>
                </div>
                <div class="tech-item">
                    <span class="tech-label">>> è§’è‰²å¾®è°ƒ:</span>
                    <span class="tech-value">Prompt Engineering (å”¯ç‰©å²è§‚åº“)</span>
                </div>
                <div class="tech-item">
                    <span class="tech-label">>> åç«¯æ¶æ„:</span>
                    <span class="tech-value">Serverless (Zeabur/Vercel)</span>
                </div>
                <div class="tech-item">
                    <span class="tech-label">>> è·¨åŸŸæ–¹æ¡ˆ:</span>
                    <span class="tech-value">Same-Origin Proxy</span>
                </div>
            </div>
        </div>

        <div class="section scroll-reveal" style="min-height: auto;">
            <h2 style="margin-bottom: 30px; color: #fff; font-size: 2rem; border-left: 5px solid var(--gold); padding-left: 20px;">
                <span style="color:var(--gold)">//</span> å›¢é˜ŸåŸåˆ›æˆæœå±•ç¤º
            </h2>
            <div class="showcase-container">
                <div class="poster-box">
                    <img src="poster.jpg" alt="å°ç»„æ‰‹æŠ„æŠ¥ - æˆ‘å¿ƒä¸­çš„é©¬å…‹æ€">
                    <div class="poster-label">ğŸ“· å›¢é˜Ÿæ‰‹ç»˜ä½œå“ï¼šã€Šæˆ‘å¿ƒä¸­çš„é©¬å…‹æ€ã€‹</div>
                </div>
                <div class="lyrics-box">
                    <div class="lyrics-title">ğŸµ åŸåˆ›æ­Œæ›²ï¼šã€Šç ´æ™“çš„é’Ÿå£°ã€‹</div>
                    <div class="lyrics-content">
<span class="section-tag">[Intro]</span>
(æ¸©æš–çš„é’¢ç´ç‹¬å¥ï¼Œåƒæ™¨å…‰æ´’ä¸‹) (å¼¦ä¹æ…¢æ…¢å‡èµ·)

<span class="section-tag">[Verse 1]</span>
ç¿»å¼€äº† è¿™ä¸€é¡µ æ³›é»„çš„çº¸å¼  å´ä¾ç„¶æ»šçƒ«
ç‰¹é‡Œå°”çš„é£ å¹æ•£äº†è¿·é›¾ æŒ‡å¼•æˆ‘æ–¹å‘
æˆ‘çœ‹è¿‡ å¤ªå¤š è¿·èŒ«çš„è„¸åº åœ¨åå­—è·¯å£ å¤±å»äº†ä¸»å¼ 

<span class="section-tag">[Verse 2]</span>
ç›´åˆ°æˆ‘é‡è§ä½  å†™ä¸‹çš„è¯—è¡Œ åƒä¸€é“é›·ç”µ åˆ’ç ´äº†å±éšœ
ä½ è¯´ è¿™ä¸–ç•Œ ä¸ä»…ä»…æ˜¯æƒ³è±¡ è¦ç”¨æ‰‹ å»æ”¹å˜å®ƒ åŸæœ¬çš„æ¨¡æ ·

<span class="section-tag">[Pre-Chorus]</span>
ä¸æ˜¯é«˜é«˜åœ¨ä¸Š å†°å†·çš„é›•åƒ è€Œæ˜¯è·Ÿæˆ‘ä¸€æ · çƒ­è¡€çš„èƒ¸è†›

<span class="section-tag">[Chorus]</span>
ä½ æ˜¯ æˆ‘å¿ƒä¸­ ç ´æ™“çš„é’Ÿå£° å”¤é†’äº† æ²‰ç¡ é‚£ä¸ªæ¢¦
ä½ è®© æˆ‘çœ‹æ‡‚ å¹³å‡¡çš„è‹±é›„ ä¹Ÿæ‹¥æœ‰ æ’¼åŠ¨ä¸–ç•Œ çš„å…‰è£
ç©¿è¶Šè¿‡ ç™¾å¹´æ—¶ç©ºçš„è£‚ç¼ ä½ ä¾ç„¶å¹´è½» ä¾ç„¶è®©æˆ‘ä»¬ æ„ŸåŠ¨

<span class="section-tag">[Interlude]</span>
(ç”µå‰ä»– Soloï¼Œæ¸©æš–ä¸”å……æ»¡åŠ›é‡)

<span class="section-tag">[Verse 3]</span>
æˆ‘ä»¬æ­£ èµ°åœ¨ä½  é“ºå¼€çš„è·¯ä¸Š æ¯ä¸€æ­¥è„šå° éƒ½å†™æ»¡å€”å¼º
çœŸç†çš„å‘³é“ ä¹Ÿè®¸ä¼šè‹¦æ¶© ä½†å›å‘³æ‚ é•¿ èƒ½æ»‹å…»ç”Ÿé•¿

<span class="section-tag">[Chorus]</span>
ä½ æ˜¯ æˆ‘å¿ƒä¸­ ç ´æ™“çš„é’Ÿå£° å”¤é†’äº† æ²‰ç¡ é‚£ä¸ªæ¢¦
ä½ è®© æˆ‘çœ‹æ‡‚ å¹³å‡¡çš„è‹±é›„ ä¹Ÿæ‹¥æœ‰ æ’¼åŠ¨ä¸–ç•Œ çš„å…‰è£
ç©¿è¶Šè¿‡ ç™¾å¹´æ—¶ç©ºçš„è£‚ç¼ ä½ ä¾ç„¶å¹´è½» ä¾ç„¶è®©æˆ‘ä»¬ æ„ŸåŠ¨

<span class="section-tag">[Bridge]</span>
è–ªç«åœ¨ä¼ é€’ ä»ä½ çš„æ‰‹é‡Œ äº¤åˆ°äº† æˆ‘ä»¬çš„æ‰‹é‡Œ...
(é¼“ç‚¹æ¸å¼ºæ»šå¥) ç”Ÿç”Ÿï¼ä¸æ¯ï¼

<span class="section-tag">[Chorus - Final]</span>
ä½ æ˜¯ æˆ‘å¿ƒä¸­ ä¸ç­çš„ç«ç§ ç‚¹ç‡ƒäº† å“ªæ€• æœ€å¾®å¼±çš„æ¢¦
æˆ‘ä»¬ä¼š è®°å¾—ä½  æ›¾å“ªæ€•ç—› ä¹Ÿä»æœªæ”¾ä¸‹ é‚£ä¸€ä»½èª“è¨€çš„é‡

<span class="section-tag">[Outro]</span>
(é’¢ç´å›å½’å¹³é™) æˆ‘å¿ƒä¸­çš„... é‚£ä¸€æŠ¹çº¢...
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="team-names">Team: æ ¾ä¿Šè¾‰ / æ—å­è½© / é©¬æ¬£å®‡</div>
            <div class="course-info">Create For - é©¬å…‹æ€ä¸»ä¹‰åŸç†2024çº§æ™ºèƒ½ç§‘å­¦ä¸æŠ€æœ¯è¯¾ç¨‹ä½œä¸š</div>
            <div style="margin-top: 10px; font-size: 0.7rem;">Powered by WebGL & DeepSeek AI</div>
        </footer>

    </div>

    <script>
        function forceShowContent() {
            ScrollTrigger.getAll().forEach(t => t.kill());
            document.querySelectorAll('.content, .section, .scroll-reveal, .theory-card').forEach(el => {
                el.style.opacity = '1'; el.style.transform = 'none'; el.style.visibility = 'visible';
            });
            alert("å·²æ‰§è¡Œå¼ºåˆ¶ä¿®å¤ã€‚");
        }

        function startExperience() {
            const audio = document.getElementById('bgm');
            audio.volume = 0.5; audio.play().catch(e => console.log("éœ€äº¤äº’æ’­æ”¾"));
            document.getElementById('start-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('start-screen').style.display = 'none';
                document.getElementById('main-content').style.opacity = '1';
                ScrollTrigger.refresh(); typeWriter();
            }, 1000);
        }
        function toggleMusic() { const a=document.getElementById('bgm'); if(a.paused)a.play();else a.pause(); }

        const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x050505, 0.02);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);
        const geometry = new THREE.BufferGeometry(); const count = 3500;
        const positions = new Float32Array(count*3); const colors = new Float32Array(count*3);
        for(let i=0; i<count*3; i++){ positions[i]=(Math.random()-0.5)*25; colors[i]=Math.random()>0.5?1:0.6; }
        geometry.setAttribute('position', new THREE.BufferAttribute(positions,3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors,3));
        const particles = new THREE.Points(geometry, new THREE.PointsMaterial({size:0.06, vertexColors:true, transparent:true, opacity:0.9, blending:THREE.AdditiveBlending}));
        scene.add(particles); camera.position.z = 5;
        let mouseX=0, mouseY=0; document.addEventListener('mousemove', e=>{mouseX=(e.clientX-window.innerWidth/2)*0.0005;mouseY=(e.clientY-window.innerHeight/2)*0.0005;});
        function animate(){requestAnimationFrame(animate);particles.rotation.y+=0.001;particles.rotation.y+=(mouseX-particles.rotation.y)*0.05;renderer.render(scene,camera);}animate();
        window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);ScrollTrigger.refresh();});

        gsap.registerPlugin(ScrollTrigger);
        window.addEventListener("load",()=>{ScrollTrigger.refresh();});
        gsap.utils.toArray('.scroll-reveal').forEach(elem=>{
            gsap.from(elem, { y: 50, opacity: 0, duration: 1, ease: "power2.out", scrollTrigger: { trigger: elem, start: "top 85%", toggleActions: "play none none reverse" } });
        });
        const text="å“²å­¦å®¶ä»¬åªæ˜¯ç”¨ä¸åŒçš„æ–¹å¼è§£é‡Šä¸–ç•Œï¼Œé—®é¢˜åœ¨äºæ”¹å˜ä¸–ç•Œã€‚";
        let tIdx=0; function typeWriter(){if(tIdx<text.length){document.getElementById("typewriter").innerHTML+=text.charAt(tIdx);tIdx++;setTimeout(typeWriter,50);}}

        // âœ… å…³é”®ç‚¹ï¼šè¿™é‡Œä¿æŒä½ åŸå§‹çš„åç«¯ä»£ç†é€»è¾‘ï¼Œå®Œå…¨æ²¡åŠ¨ï¼
        // é€‚é… Zeabur çš„ /api/chat è·¯å¾„
        const API_KEY=""; const API_URL="/api/chat";
        async function sendMessage(){
            const i=document.getElementById('user-input'); const t=i.value.trim(); if(!t)return;
            addMessage('user',t); i.value=''; const l=addMessage('ai','<span style="opacity:0.7">æ€è€ƒä¸­...</span>');
            try{
                // è¿™é‡Œçš„ fetch è¿˜æ˜¯å‘çš„ /api/chatï¼Œç”± Zeabur æ‰˜ç®¡çš„åç«¯æ¥å¤„ç†ï¼ŒKey åœ¨åç«¯é‡Œã€‚
                const r=await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"ä½ ç°åœ¨æ˜¯å¡å°”Â·é©¬å…‹æ€..."},{role:"user",content:t}]})});
                if(!r.ok)throw new Error("API Error"); const d=await r.json(); updateMessage(l,d.choices[0].message.content);
            }catch(e){updateMessage(l,"å†å²çš„è¾©è¯æ³•å‘Šè¯‰æˆ‘ä»¬... (ç¦»çº¿æ¨¡å¼)");}
        }
        function addMessage(r,h){const w=document.getElementById('chat-window'),d=document.createElement('div');d.className=`message ${r}`;d.id='msg-'+Date.now();d.innerHTML=r==='ai'?`<strong>é©¬å…‹æ€:</strong> ${h}`:h;w.appendChild(d);w.scrollTop=w.scrollHeight;return d.id;}
        function updateMessage(id,t){document.getElementById(id).innerHTML=`<strong>é©¬å…‹æ€:</strong> ${window.marked?marked.parseInline(t):t}`;}
        document.getElementById('user-input').addEventListener('keypress',e=>{if(e.key==='Enter')sendMessage();});
    </script>
</body>
</html>